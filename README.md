![yamdb workflow](https://github.com/kotbarbarossa/yamdb_final/actions/workflows/yamdb_workflow.yml/badge.svg)
## ip: 51.250.73.154

# Проект YaMDb. Протокол "Фантом".
## _Отличный специализированный портал для получения актуальной информации о любых современных произведениях во всех видах искусств!_
Проект YaMDb представляет из себя API-ориентированную базу данных произведений в различных сферах искусств и абсолютно всех жанров. YaMDb предоставляет расширенный функционал для взаимодействия пользователей с произведениями а именно:

* Создание произведений различных жанров и категорий
* Добавление рецензий к произведениям с возможностью поставить оценку от 1 до 10
* Создание комментариев к конкретному отзыву.

Таким образом пользователи могут активно взаимодействовать с ресурсом, общаясь и обсуждая произведения и свои впечатления о них, читать отзывы других пользователей или создавать свои собственные, а так же комментировать и ставить оценки произведениям! Вкупе всё это создает потрясающий програмный продукт для пользователя, который хочет получать подробную информацию о конкретном произведении, основанную на персональных ощущениях других пользователей! 

[![N|Solid](https://img.freepik.com/free-photo/businesspeople-at-office-meeting_23-2148908967.jpg?w=2000&t=st=1661689328~exp=1661689928~hmac=9b24a57975b0c56f0d8762a872114722c62c117f7d0c80f979880b2060f72487)]()

На сайте реализована расширенная версия ролей, включающая в себя модератора, который имеет право удалять и редактировать любые отзывы и комментарии. Тем самым внося гармонию, покой и упорядочность в бурлящих реках онлайн обсуждений!

Кроме всего прочего в проекте реализована полноценная админ зона с полным функционалом для работы со всем контентом проекта!

### Как запустить проект:

Клонируем репозиторий и переходим в него:
```bash
git clone https://github.com/kotbarbarossa/infra_sp2
cd infra_sp2
cd api_yamdb
```

Создаем и активируем виртуальное окружение:
```bash
python3 -m venv venv
source /venv/bin/activate
python -m pip install --upgrade pip
```

Ставим зависимости из requirements.txt:
```bash
pip install -r requirements.txt
```

Переходим в папку с файлом docker-compose.yaml:
```bash
cd infra
```

Запускаем сборку:
```bash
docker-compose up -d --build
```

Выполняем миграции:

```bash
sudo docker-compose exec web python manage.py migrate
```

Создаем суперпользователя:
```bash
sudo docker-compose exec web python manage.py createsuperuser
```

Србираем статику:
```bash
sudo docker-compose exec web python manage.py collectstatic --no-input
```

Останавливаем контейнеры:
```bash
docker-compose down -v
```

### Наполнение базы прямиком из ```.csv``` файла!
«Закинь данные из csv в БД» — достаточно распространённая задача.
В проекте YaMDb реализован програмный модуль автоматического наполнения баз данных!
Для это необходимо всего лишь поместить файлы по адресу ```/api_yamdb/static/data``` и ввести команду:
```sh
python manage.py load_data_from_csv
```

### Загрузка данных из фикстур в формате json.

```sh
docker-compose run web python manage.py loaddata fixtures.json 
```

### Шаблон наполнения infra/.env
```
DB_ENGINE=django.db.backends.postgresql
DB_NAME=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DB_HOST=db
DB_PORT=5432
```

### Для регистрация нового пользователя необходимо выполнить следующее:

1. Отправляем POST-запрос с полями 
email и username 
на эндпоинт /api/v1/auth/signup/.  

```sh
{  
    "email": "string",  
    "username": "string"  
}
```
2. На указанный email получаем (confirmation_code).

3. Отправляем POST-запрос с параметрами 
username и confirmation_code 
на эндпоинт /api/v1/auth/token/.  

```sh
{  
    "username": "string",  
    "confirmation_code": "string"  
} 
```

4. В ответе на запрос получаем JWT-токен.

```sh
{  
    "token": "string",  
}
```

### Актуальная информация по взаимодействию с эндпоинтами.

Для быстро ориентирования в системе эндоитов API в проекте подключена документация API! Возпользоваться ей можно пройдя по адресу:
```sh
http://127.0.0.1:8000/redoc/ 
```
В ней описаны возможные запросы к API и структура ожидаемых ответов. Для каждого запроса указаны уровни прав доступа: пользовательские роли, которым разрешён запрос, права доступа и дополнительные параметры, если это необходимо.

### Автор 

**Эльдар Барбаросса** 
[INSTAGRAM]

_Если этот Readme был полезен не забудь поддержить подпиской мой [youtube] канал (не свзанный с програмированием)! Ведь это дает:_
*  +150 кармы от фракции Рыжих Викингов!
*  +135 репутации Анталийских котов.
*  а также один бесплатный просмотр заката на крыше в одном их Турецких городов!

[//]: # (links)

   [youtube]: https://www.youtube.com/channel/UC0NWbtRrU1YvsCP_0Slq-9A/
   [INSTAGRAM]: https://instagram.com/kot.barbarossa?igshid=YmMyMTA2M2Y=
